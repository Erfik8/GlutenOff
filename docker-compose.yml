#docker-compose.yml
version: "3.8"

services:
    php:
        build:
          context: .
          dockerfile: docker/php/Dockerfile
        ports:
          - "8000:8000"
        volumes:
            - .:/app/
        networks:
            - symfony

    nginx:
        build:
          context: .
          dockerfile: docker/nginx/Dockerfile
        ports:
          - "80:80"
        volumes:
          - .:/app/
        links:
          - php
          - db
        networks:
            - symfony

    db:
        build:
          context: .
          dockerfile: docker/db/DockerFile
        restart: always
        ports:
            - 5432:5432
        volumes:
            - ./docker/postgres/:/docker-entrypoint-initdb.d/
        networks:
            - symfony
    pgadmin:
        container_name: pgadmin4_container
        image: dpage/pgadmin4
        restart: always
        environment:
          PGADMIN_DEFAULT_EMAIL: admin@admin.com
          PGADMIN_DEFAULT_PASSWORD: root
        ports:
          - "5050:80"
        networks:
            - symfony

networks:
    symfony: